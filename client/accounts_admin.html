<template name="accountsAdmin">
 <div class="ui transition  segment">
    <div class="ui header">User administration</div>
      <div class="input-group">
            <input type="text" class="form-control search-input-filter" value="{{searchFilter}}">
            <span class="input-group-btn">
                <button class="ui button" type="button"><span><i class="ui search icon"></i></span></button>
                <button class="ui button" type="button" data-action="updateRoles" data-toggle="modal">Manage Roles</button>
                <button class="ui button" type="button" data-action="addUser" data-toggle="modal" ><i class="ui plus icon"></i> Add User</button>
            </span>
      </div>
      <table class='ui sortable table segment'>
          <thead>
              <tr>
                  <th></th>
                  <th class="ascending">Name</th>
                  <th>Email</th>
                  <th>UserId</th>
                  <th>Roles</th>
                  <th class="ascending">Points</th>
              </tr>
          </thead>
          <tbody>
              {{#each users}}
                  <tr class="{{#if myself _id}}warning{{/if}}">
                      <td class="userActionIcons">
                        {{#unless myself _id}}
                              <span data-toggle="modal" data-action="delete"  class=""><i class="ui trash icon"></i></span>
                              <span data-toggle="modal" data-action="update" class=""><i class="ui pencil icon"></i></span>
                              <span data-toggle="modal" data-action="info" class=""><i class="ui info icon"></i></span>
                              {{#if isInRole 'superAdmin'}}<span data-action="impersonate" class=""><i class="ui privacy icon"></i></span>{{/if}}
                        {{/unless}}
                      </td>
                      <td>
                          {{#if profile.name}}
                              {{profile.name}}
                          {{else}}
                              {{email}}
                          {{/if}}
                      </td>
                      <td>{{email}}</td>
                      <td>{{_id}}</td>
                      <td>{{roles}}</td>
                      <td class="ui float right">{{points}}</td>
                  </tr>
              {{/each}}
          </tbody>
      </table>
    </div>
    {{> updateRolesModal}}
    {{> deleteAccountModal}}
    {{> infoAccountModal}}
    {{> updateAccountModal}}
    {{> addUserModal}}
</template>
